function zeroFill(a,b){var c="";if("string"==typeof b)b=parseInt(b,10);else if("number"!=typeof b)return a;for(var d=0;b>d;d++)c+="0";return(c+a).slice("-"+b)}function dateFormat(a){var b=new Date(a),c=b.getFullYear(),d=zeroFill(b.getMonth()+1,2),e=zeroFill(b.getDate(),2),f=zeroFill(b.getHours(),2),g=zeroFill(b.getMinutes(),2),h=zeroFill(b.getSeconds(),2);return c+"/"+d+"/"+e+" "+f+":"+g+":"+h}function updateBadge(a){var b,c,d=lc.getItem("data"),e=lc.getItem("badgeType");if(""!==d){b=JSON.parse(d);for(var f in b)if(b.hasOwnProperty(f)&&f===e){c=b[f].currentValue.split(",").join("");break}}else c=a?a:"---";chrome.browserAction.setBadgeBackgroundColor({color:"#fe6000"}),chrome.browserAction.setBadgeText({text:c})}function updateStatus(a){var b=new Date;"offline"!==a?(lc.setItem("data",JSON.stringify(a)),lc.setItem("update",dateFormat(b)),updateBadge()):(lc.setItem("status","offline:"+dateFormat(b)),updateBadge("offline"))}function requestURL(a,b){$.ajax({type:"GET",url:a,dataType:"json",timeout:300,success:function(a){b(a)},error:function(){b("offline")}})}function requestStatus(){requestURL(lc.getItem("url"),updateStatus),timerID&&clearTimeout(timerID),timerID=setTimeout(requestStatus,lc.getItem("timerMs"))}function init(){if(""===lc.getItem("update")||null===lc.getItem("update"))for(var a in defaultProps)defaultProps.hasOwnProperty(a)&&lc.setItem(a,defaultProps[a]);"installed"===lc.getItem("status")&&(""===lc.getItem("url")?(updateStatus("offline"),updateBadge("urlx")):requestStatus()),$(window).on("storage",requestStatus)}var lc=localStorage,timerID,defaultProps={url:"",badgeType:"numLawyerAnswerRate",timerMs:3e5,update:"",status:"installed",data:"",dispLevel:'{"titleLaw": [1, "%e5%bc%81%e8%ad%b7%e5%a3%ab%e9%96%a2%e9%80%a3%e3%82%b9%e3%83%86%e3%83%bc%e3%82%bf%e3%82%b9"], "numLawyer": [2, "%e4%ba%ba"], "numBillingLawyer":  [2, "%e4%ba%ba"], "numSearchContact":  [2, "%e4%bb%b6"], "titleUser": [1, "%e4%b8%80%e8%88%ac%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e9%96%a2%e9%80%a3%e3%82%b9%e3%83%86%e3%83%bc%e3%82%bf%e3%82%b9"], "numCitizen":  [2, "%e4%ba%ba"], "numBillingCitizen":  [2, "%e4%ba%ba"], "numBillingCitizenCurrentMonth":  [3, "%e4%ba%ba"], "numUnBillingCitizenCurrentMonth":  [3, "%e4%ba%ba"], "titleMinpo": [1, "%e3%81%bf%e3%82%93%e6%b3%95%e9%96%a2%e9%80%a3%e3%82%b9%e3%83%86%e3%83%bc%e3%82%bf%e3%82%b9"], "numBbsQuestion":  [2, "%e4%bb%b6"], "numBbsAnswer":  [2, "%e4%bb%b6"], "numLawyerAnswerRate":  [2, "%25"]}'};$(function(a){init(a)});